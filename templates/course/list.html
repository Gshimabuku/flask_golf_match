{% extends "base.html" %}

{% block title %}コース一覧{% endblock %}

{% block body_class %}course-list-page{% endblock %}

{% block header %}
{% set header_title = "コース一覧" %}
{% include '_header.html' %}
{% endblock %}

{% block content %}
<!-- ページ固有のアクションボタン -->
<div class="page-actions">
    <button type="button" class="action-btn" id="new-course-button">新規作成</button>
</div>

<div class="course-list">
    {% for course in courses %}
    <div class="course-card" data-course-id="{{ course.page_id }}">
        <div class="course-header">
            <div class="course-title">{{ course.name }}</div>
            <span class="course-type type-{{ course.course_type }}">{{ course.type_display }}</span>
        </div>
        <div class="course-details">
            <div class="detail-row">
                <span class="detail-label">住所:</span>
                <span class="detail-value">{{ course.address }}</span>
            </div>
            <div class="detail-row">
                <span class="detail-label">PAR:</span>
                <span class="detail-value">{{ course.par }}</span>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block scripts %}
<script>
    // 戻るボタンの処理
    document.addEventListener('header-back-clicked', function () {
        location.href = '{{ url_for("home") }}';
    });

    // 新規作成ボタンの処理
    document.getElementById('new-course-button').addEventListener('click', function () {
        location.href = '{{ url_for("course_new") }}';
    });

    // コースカードのクリックイベント
    document.querySelectorAll('.course-card').forEach(function(card) {
        card.addEventListener('click', function() {
            const courseId = this.getAttribute('data-course-id');
            location.href = '{{ url_for("course_detail", course_id="COURSE_ID") }}'.replace('COURSE_ID', courseId);
        });
    });
</script>
{% endblock %}
